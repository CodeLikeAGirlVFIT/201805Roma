if (self.CavalryLogger) { CavalryLogger.start_js(["3BV9v"]); }

__d("TimelineProfilePictureLoggerEnums",[],(function(a,b,c,d,e,f){e.exports={actions:{ADD_FRAME:"add_frame",EDIT_THUMBNAIL:"edit_thumbnail",FROM_PHOTOS:"from_photos",MAKE_PROFILE:"make_profile",SILHOUETTE:"silhouette",SUGGESTION:"suggestion",SUGGESTION_UPLOAD:"suggestion_upload",SYNCED_PHOTO:"synced_photo",TAKE_PHOTO:"take_photo",UPLOAD:"upload_photo",USE_PREVIOUS:"use_previous"},flows:{PERMALINK:"permalink",SNOWLIFT:"snowlift",SPOTLIGHT:"spotlight",VAULT:"vault",ZOOMCROP:"zoomcrop"},steps:{CANCEL:"cancel",CROP:"crop",CROP_FAIL:"crop_fail",CROP_SAVING:"crop_saving",CROP_SUCCESS:"crop_success",DRAG_AND_DROP:"drag_and_drop",FAIL:"fail",INIT:"init",LOADING:"loading",PREVIOUS_PIC_FAIL:"previous_pic_fail",PREVIOUS_PIC_INIT:"previous_pic_init",PREVIOUS_PIC_SAVING:"previous_pic_saving",PREVIOUS_PIC_SUCCESS:"previous_pic_success",RESIZE_BEGIN:"resize_begin",RESIZE_SKIPPED:"resize_skipped",RESIZE_SUCCESS:"resize_success",RESIZE_FAIL:"resize_fail",SKIP_CROP:"skip_crop",SUCCESS:"success",UPLOAD_CANCEL:"upload_cancel",UPLOAD_SELECT:"upload_select",UPLOAD_SUCCESS:"upload_success",VIEWER_INIT:"viewer_init"}}}),null);
__d("ServerRedirect",["FBLogger","ReloadPage","URI","goURI","killswitch"],(function(a,b,c,d,e,f){function a(a,c,d){var e=new(b("URI"))(a);e.getQualifiedURI().toString()===b("URI").getNextURI().toString()?b("FBLogger")("redirect").mustfix('Potentially infinite navigation detected: trying to navigate to "%s" while on "%s"',e.toString(),b("URI").getNextURI().toString()):b("goURI")(a,c,d)}c={redirectPageTo:b("killswitch")("PREVENT_INFINITE_URL_REDIRECT")?b("goURI"):a,reloadPage:b("ReloadPage").now};e.exports=c}),null);
__d("ProfilePhotoActionLogger",["Banzai"],(function(a,b,c,d,e,f){a={EVENT_SELECT_METHOD:"select_method",EVENT_CAMERA_PERMISSION_PROVIDED:"permission_provided",EVENT_CAMERA_PERMISSION_DENIED:"permission_denied",EVENT_CAMERA_NO_WEBCAM:"permission_denied",EVENT_CAMERA_UNKNOWN_MEDIASTREAM_ERROR:"unknown_mediastream_error",EVENT_CAMERA_TAKE_PHOTO:"take_photo",EVENT_CAMERA_RETAKE_PHOTO:"retake_photo",EVENT_CAMERA_UPLOAD_ATTEMPT:"upload_attempt",EVENT_CAMERA_UPLOAD_ERROR:"upload_error",EVENT_CAMERA_UPLOAD_SUCCESS:"upload_success",SOURCE_SUGGESTIONS:"suggestions",SOURCE_TIMELINE:"timeline",SOURCE_NUX:"nux",METHOD_EXISTING:"existing",METHOD_UPLOAD:"upload",METHOD_CAMERA:"camera",log:function(a,c,d){b("Banzai").post("profile_photo_action",{event:a,source:c,method:d})}};e.exports=a}),null);
__d("TimelineProfilePicConfig",["fbt"],(function(a,b,c,d,e,f,g){a={loading:"timeline/profile_pic/loading",success:"timeline/profile_pic/success",leavingMessage:g._("L'immagine del profilo \u00e8 in fase di caricamento. Confermi di voler uscire?")};e.exports=a}),null);
__d("ProfilePictureFlowLogging",["Arbiter","Banzai","Event","Parent","ProfilePhotoActionLogger","Run","TimelineProfilePicConfig","TimelineProfilePictureLoggerEnums","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g=b("TimelineProfilePicConfig").loading,h=b("TimelineProfilePicConfig").success,i="data-action-type",j=void 0,k=void 0,l=void 0,m=void 0;function n(){m&&m.unsubscribe(),m=null}var o={action:b("TimelineProfilePictureLoggerEnums").actions,flow:b("TimelineProfilePictureLoggerEnums").flows,step:b("TimelineProfilePictureLoggerEnums").steps,log:function(a){var c=a||o.step.INIT;b("Banzai").post("profile_pic_action",{action_type:j,flow_type:k,step_type:c});j===o.action.UPLOAD&&c===o.step.INIT&&b("ProfilePhotoActionLogger").log(b("ProfilePhotoActionLogger").EVENT_SELECT_METHOD,l,b("ProfilePhotoActionLogger").METHOD_UPLOAD);k=null;(a==="success"||a==="fail")&&(j=null);return o},setAction:function(a){j=a;return o},setFlowType:function(a){k=a;return o},setSource:function(a){l=a;return o},init:function(a,c){c&&(l=c),m||(m=b("Arbiter").subscribe([g,h],function(a){o.log(a===g?b("TimelineProfilePictureLoggerEnums").steps.LOADING:b("TimelineProfilePictureLoggerEnums").steps.SUCCESS)}),b("Run").onLeave(n)),b("tidyEvent")(b("Event").listen(a,"click",function(a){a=b("Parent").byAttribute(a.getTarget(),i);if(!a)return;o.setAction(a.getAttribute(i)).log()}))},initMenuItems:function(a,b,c){o.init(a.getRoot(),c)}};e.exports=o}),null);
__d("XWorkNewsfeedNuxNextStepController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/newsfeed_nux/next_step/",{})}),null);
__d("ProfilePicCropViewerInit",["Bootloader","CurrentCommunity","ProfilePictureFlowLogging","React","ServerRedirect","XWorkNewsfeedNuxNextStepController"],(function(a,b,c,d,e,f){__p&&__p();var g="profile-picture-crop",h="loading",i=b("ProfilePictureFlowLogging").flow,j=void 0,k=void 0;function l(){k&&k.close()}function m(a,c,d){__p&&__p();d=d||{};b("Bootloader").loadModules(["SpotlightViewerInit","ZoomProfilePicCropViewer.react","PhotoStore","AsyncRequest","AsyncResponse","XProfilePicCropViewerAsyncController"],function(e,f,i,m,n,o){__p&&__p();l();var p=d.stickerID;j=g+":"+a+":"+c;p&&(j+=":"+p);var q=d.successCallback,r=b("CurrentCommunity").getID()!=="0";!q&&(d.source==="atwork_nux"||d.source==="timeline"||d.source==="atwork_profile_nux")&&r&&(q=function(a){a=b("XWorkNewsfeedNuxNextStepController").getURIBuilder().getURI();new m().setURI(a).setData({current_step_id:1,skipped:!1}).setHandler(function(){b("ServerRedirect").reloadPage()}).send()});if(!d.skipCropping){r=function(){__p&&__p();k=e.render(b("React").createElement(f,{cancelCallback:d.cancelCallback,cropMode:d.cropMode,errorCallback:d.errorCallback,method:d.method,open:!0,photoID:a,profileID:c,setid:j,source:d.source,successCallback:q,uploadRequest:d.uploadRequest,warnOnCancel:d.warnOnCancel}),function(){k=null});if(i.hasBeenCreated(j)||a===h)return{v:void 0};var g=o.getURIBuilder().setString("photo_id",a).setInt("profile_id",c).setString("set_id",j).setBool("will_load_more_photos",!0);p&&g.setInt("sticker_id",p);g=g.getURI();var r=j;new m(g).setErrorHandler(function(a){r===j&&l(),n.defaultErrorHandler(a)}).send()}();if(typeof r==="object")return r.v}},"ProfilePicCropViewerInit");return!0}a={close:l,getFlowType:function(){return i.ZOOMCROP},useCropViewer:function(){return!0},loading:function(a,b){m(h,a,b)},loadID:m};e.exports=a}),null);
__d("react-relay/classic/query/toGraphQL",["invariant","react-relay/classic/query/QueryBuilder","react-relay/classic/query/RelayQuery","react-relay/classic/query/callsToGraphQL","react-relay/classic/query/generateConcreteFragmentID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={Query:function(a){var c=a.getBatchCall(),d=void 0;if(c)d=b("react-relay/classic/query/QueryBuilder").createBatchCallVariable(c.sourceQueryID,c.sourceQueryPath);else{c=a.getIdentifyingArg();c&&(Array.isArray(c.value)?d=c.value.map(b("react-relay/classic/query/QueryBuilder").createCallValue):d=b("react-relay/classic/query/QueryBuilder").createCallValue(c.value))}c=a.getChildren().map(i);return b("react-relay/classic/query/QueryBuilder").createQuery({children:c,fieldName:a.getFieldName(),identifyingArgValue:d,isDeferred:a.isDeferred(),metadata:a.getConcreteQueryNode().metadata,name:a.getName(),type:a.getType()})},Fragment:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){var c=a.getChildren().map(i);c={children:c,id:b("react-relay/classic/query/generateConcreteFragmentID")(),kind:"Fragment",metadata:{isAbstract:a.isAbstract(),plural:a.isPlural()},name:a.getDebugName(),type:a.getType()};return c}),Field:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){var c=b("react-relay/classic/query/callsToGraphQL")(a.getCallsWithValues()),d=a.getChildren().map(i);c={alias:a.getConcreteQueryNode().alias,calls:c,children:d,fieldName:a.getSchemaName(),kind:"Field",metadata:a.getConcreteQueryNode().metadata,type:a.getType()};return c})};function i(a){if(a instanceof b("react-relay/classic/query/RelayQuery").Fragment)return h.Fragment(a);else{a instanceof b("react-relay/classic/query/RelayQuery").Field||g(0);return h.Field(a)}}e.exports=h}),null);
__d("GraphQLMutationQueryCreator",["GraphQLMutationProperties","react-relay/classic/query/QueryBuilder","react-relay/classic/mutation/RelayMutationQuery","react-relay/classic/query/RelayQuery","react-relay/classic/store/RelayStore","react-relay/classic/traversal/flattenRelayQuery","forEachObject","react-relay/classic/query/fromGraphQL","react-relay/classic/query/toGraphQL","warning","react-relay/classic/mutation/RelayMutationDebugPrinter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={createQuery:function(a,c){a=b("react-relay/classic/mutation/RelayMutationQuery").buildFragmentForFields({fatQuery:g(a),fieldIDs:c,tracker:b("react-relay/classic/store/RelayStore").getStoreData().getQueryTracker()});return h(a)},createRangeDeleteQuery:function(a,c,d,e){a=b("react-relay/classic/mutation/RelayMutationQuery").buildFragmentForEdgeDeletion({fatQuery:g(a),connectionName:e,parentID:c,parentName:d,tracker:b("react-relay/classic/store/RelayStore").getStoreData().getQueryTracker()});return h(a)},createRangeAddQuery:function(a,c,d,e,f){var j=i(b("GraphQLMutationProperties").getRangeConfigForType(a));a=b("react-relay/classic/mutation/RelayMutationQuery").buildFragmentForEdgeInsertion({fatQuery:g(a),connectionName:c,parentID:e,edgeName:d,parentName:f,tracker:b("react-relay/classic/store/RelayStore").getStoreData().getQueryTracker(),rangeBehaviors:j});return h(a)},createQueryFromOptimisticPayload:function(a){var c=Object.keys(a)[0],d=g(c);a=b("react-relay/classic/mutation/RelayMutationQuery").buildFragmentForOptimisticUpdate({response:a[c],fatQuery:d});return b("react-relay/classic/query/QueryBuilder").createMutation({name:"OptimisticQuery",responseType:a.getType(),calls:[b("react-relay/classic/query/QueryBuilder").createCall(c,b("react-relay/classic/query/QueryBuilder").createCallVariable("input"))],children:a.getChildren().map(b("react-relay/classic/query/toGraphQL").Field)})}};function g(a){return b("react-relay/classic/query/fromGraphQL").Fragment(b("GraphQLMutationProperties").getFatQueryForType(a))}function h(a){a=b("react-relay/classic/traversal/flattenRelayQuery")(a);return a?b("react-relay/classic/query/toGraphQL").Fragment(a):null}function i(a){__p&&__p();if(typeof a==="function")return a;var c={};b("forEachObject")(a,function(a,d){var e=void 0;if(d==="")e="";else{var f=d.slice(0,-1).split(/\)\./);e=f.sort().join(").")+(f.length?")":"");b("warning")(e===d,"RelayMutation: To define a range behavior key without sorting the arguments alphabetically is deprecated as of Relay 0.4.1 and will be disallowed in 0.5.0. Please sort the argument names of the range behavior key `%s`",d)}c[e]=a});return c}e.exports=a}),null);
__d("defaultRQLMutationCallback",["react-relay/classic/store/RelayStore","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){if(a){if(e==null){b("warning")(!1,"defaultRQLMutationCallback(): An error occurred but no mutation id was provided. The mutation cannot be rolled back and your app may display incorrect data until restarted. Please upgrade to the `RelayMutation` API: https://fburl.com/223122046.");return}c=b("react-relay/classic/store/RelayStore").getStoreData().getMutationQueue().getTransaction(e);c&&c.rollback()}}e.exports=a}),null);
__d("GraphQLMutationAction",["invariant","GraphQLMutationQueryCreator","GraphQLMutatorHub","react-relay/classic/query/QueryBuilder","RelayAPIConfig","RelayConnectionInterface","react-relay/classic/route/RelayMetaRoute","react-relay/classic/mutation/RelayMutationTransaction","react-relay/classic/mutation/RelayMutationTransactionStatus","react-relay/classic/query/RelayQuery","react-relay/classic/store/RelayStore","defaultRQLMutationCallback","warning","react-relay/classic/mutation/RelayMutationDebugPrinter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("react-relay/classic/mutation/RelayMutationTransactionStatus").COLLISION_COMMIT_FAILED;function a(a){this.$1=new i(a)}a.prototype.runOptimisticAction=function(a,c){c||(c=b("GraphQLMutationQueryCreator").createQueryFromOptimisticPayload(a)),this.$1.runOptimisticAction(a,c)};a.prototype.runServerAction=function(a,c,d){d=d||b("defaultRQLMutationCallback"),this.$1.runServerAction(a,c,null,d)};a.prototype.runServerActionWithFiles=function(a,c,d,e){e=e||b("defaultRQLMutationCallback"),this.$1.runServerAction(a,c,d,e)};a.prototype.getClientMutationID=function(){return this.$1.id};a.prototype.getOptimisticPayload=function(){return this.$1.getOptimisticResponse()};a.prototype.getOptimisticPayloadQuery=function(){return this.$1.getOptimisticQuery(b("react-relay/classic/store/RelayStore").getStoreData())};function i(a){this.error=null,this.onFailure=null,this.onSuccess=null,this.status=b("react-relay/classic/mutation/RelayMutationTransactionStatus").CREATED,this.$1=a,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.mutationTransaction=b("react-relay/classic/store/RelayStore").getStoreData().getMutationQueue().createTransactionWithPendingTransaction(this),this.id=this.mutationTransaction.getID()}i.prototype.runOptimisticAction=function(a,c){__p&&__p();var d=j({},this.id);c=k(c,d);d=void 0;if(typeof a==="object"&&a!==null){var e=a[c.getCall().name];if(typeof e==="object"&&e!==null){d=babelHelpers["extends"]({},e,(e={},e[b("RelayConnectionInterface").get().CLIENT_MUTATION_ID]=this.id,e))}}if(d==null){b("warning")(!1,"GraphQLMutationAction.runOptimisticAction(): Expected payload to have the shape `{%s: DATA}`, but got `%s`. The optimistic payload will be ignored.",c.getCall().name,JSON.stringify(a));return}this.$3=c;this.$4=d;this.mutationTransaction.applyOptimistic()};i.prototype.runServerAction=function(a,b,c,d){__p&&__p();b=j(b,this.id);this.onFailure=function(a,b){if(this.status===h)return;a=a.getError();b();d(a,null)}.bind(this);this.onSuccess=function(a){d(null,a)};this.$2=c;this.$5=k(a,b);this.mutationTransaction.commit()};i.prototype.getCallName=function(){if(this.$5)return this.$5.getCall().name;else if(this.$3)return this.$3.getCall().name;else g(0)};i.prototype.getCollisionKey=function(){return this.$1};i.prototype.getConfigs=function(){return b("GraphQLMutatorHub").getConfigs(this.getCallName())};i.prototype.getFiles=function(){return this.$2};i.prototype.getOptimisticConfigs=function(){return b("GraphQLMutatorHub").getConfigs(this.getCallName())};i.prototype.getOptimisticQuery=function(a){return this.$3};i.prototype.getOptimisticResponse=function(){return this.$4};i.prototype.getQuery=function(a){this.$5||g(0);return this.$5};function j(a,c){a[b("RelayConnectionInterface").get().CLIENT_MUTATION_ID]=c;"actor_id"in a||(a.actor_id=b("RelayAPIConfig").actorID);return{input:a}}function k(a,c){if(a instanceof b("react-relay/classic/query/RelayQuery").Mutation)return a;a=b("react-relay/classic/query/QueryBuilder").getMutation(a);a||g(0);a=b("react-relay/classic/query/RelayQuery").Mutation.create(a,b("react-relay/classic/route/RelayMetaRoute").get("$GraphQLMutationAction"),c);return a}e.exports=a}),null);